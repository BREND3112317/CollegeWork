# Homework4

### 2. ALU 與 CPU 有甚麼關係? 其主要功能是什麼?
```
ALU 是許多類型的計算電路的基本部件，CPU 有部分是由ALU組成的
ALU 對二進位整數執行算術運算或位運算
```

### 4. 定址 2M x 32 的記憶體需要多少位元，若其為
    - 以位元定址?
> $2^1*2^{20}*2^{2} = 2^{23}$<br/>
>        23 位元

    - 以字組定址?
> $2^1*2^{20}=2^{21}$<br/>
>       21 位元
### 6. 定址 1M x 8 的記憶體需要多少位元，若其為
    - 以位元定址?
> $2^{0}*2^{20}*2^{0}=2^{20}$<br/>
>        20 位元

    - 以字組定址?
> $2^{0}*2^{20}=2^{20}$<br/>
>        20 位元

### 8. 假設在圖4.6與4.7中有4個記憶體模組而非8個。畫出各記憶體模組與他們包含的位址範圍，若其為
- 高序位交錯

|   0   |   1   |   2   |   3   |
| :---: | :---: | :---: | :---: |
|   0   |   8   |  16   |  24   |
|   1   |   9   |  17   |  25   |
|   2   |  10   |  18   |  26   |
|   3   |  11   |  19   |  27   |
|   4   |  12   |  20   |  28   |
|   5   |  13   |  21   |  29   |
|   6   |  14   |  22   |  30   |
|   7   |  15   |  23   |  21   |
- 低序位交錯

|   0   |   1   |   2   |   3   |
| :---: | :---: | :---: | :---: |
|   0   |   1   |   2   |   3   |
|   4   |   5   |   6   |   7   |
|   8   |   9   |  10   |  11   |
|  12   |  13   |  14   |  15   |
|  16   |  17   |  18   |  19   |
|  20   |  21   |  22   |  23   |
|  24   |  25   |  26   |  27   |
|  28   |  29   |  30   |  31   |

### 10. 設 2M x 16 的主記憶體是以 256K x 8 的 RAM 晶片構成且記憶體是以字組定址。
- 共需多少個 RAM 晶片?
> $(2M*16)/(256K*8)=8*2=16$<br/>
    ```
    16 個
    ```
- 若需存取一個完整字組，必須使用到多少晶片?
> $16/8=2$<br/>
    ```
    2
    ```
- 每個 RAM 晶片需要多少個位址位元?
> $256K = 2^{8}*2^{10}$<br/>
    ```
    8+10=18個
    ```
- 這個記憶體共有多少個排?
>    ```
>    8
>    ```
- 整個記憶體需用多少個位址位元?
> $2M=2^{1}*2^{20}$<br/>
    ```
    1+20=21個
    ```
- 若使用高序交錯，位址 14(十六進的E)將位於何處?
>   ```
>   這裡共有8排，每排有256K個位元，所以14是在第一個256K裡面
>   第 0 排
>   ```
- 若使用低序交錯，重作上題
>   ```
>   第 6 排
>   ```

### 13. 一數位計算機有以 24 位元為字組的記憶單元。指令集中有 150 種不同的運作。所有指令都有運作碼部分(opcode)與位址部分(只包含一個位址)。每一指令儲存於記憶體的一個字組中。
- 運作碼需佔用多少位元?
> $150 < (256 = 2^8)$<br/>
    ```
    8 位元
    ```
- 指令中的位址部分剩下多少個位元?
> $24 - 6 = 16$
- 最大的可容許記憶體大小是多大?
> $2^{16}$
- 可容納於一個記憶體字組中的最大無號數為何?
> $2^{24}-1$


### 15.  設有一 2²⁰ 位元組的記憶體。
- 若記憶體是以位元組定址，最低與最高的位址各為何?
> $8/8=2^{0}$<br/>
> $0$, $(2^{20-0}-1)$ = $0$, $(2^{20}-1)$
- 若記憶體是以字組定址且字組大小是 16 位元，最低與最高的位址各為何?
>  $16/8=2^{1}$<br/>
>  $0$, $(2^{20-1}-1)$ = $0$, $(2^{19}-1)$
- 若記憶體是以字組定址且字組大小是 32 位元，最低與最高的位址各為何?
>  $32/8=2^{2}$<br/>
>  $0$, $(2^{20-2}-1)$ = $0$, $(2^{18}-1)$

### 29. 以 MARIE 組合語言寫出下列的碼片段:
```
if X > 1 then
    Y = X + X;
    X = 0;
endif;
Y = Y + 1;
```
- MARIE
    ```	
    If, 	Load        X 
            Subt        One 
            Skipcond    800 
            Junp        EndIf 
    Then, 	Load        X 
            Add         X 
            Store       Y 
            Load        Zero 
            Store       X 
    EndIf,  Load        Y 
            Add         One 
            Store       Y 
            Halt
    X,	    Dec         0
    One,	Dec         1
    Zero,	Dec         0
    ```

### 34. 寫出下列碼片段的 MARIE 組合語言程式。(提示: 將 for 迴圈改成 while 迴圈。)
```
Sum = 0;
for X = 1 to 10 do
    Sum = Sum + X;
```
- MARIE
    ```	
    Loop,		Load        Sum
                Add         X
                Store       Sum
                load 		Sum
                Output
                Load        X
                Add         ONE
                Store       X
                Load        X
                Subt        TEN
                SkipCond    400
                Jump        Loop
    EndLoop,	Halt
    X,		    Dec 1
    Sum,		Dec 0
    ZERO,		Dec 0
    ONE,		Dec 1
    TEN,		Dec 10
    ```

### 35. 以迴圈形式寫出以重複加法將二個正數相乘的 MARIE 程式。例如對 3 X 6，程式會加 3 六次。
- MARIE
    ```	
    Loop,       Load        I
                Subt        Y
                SkipCond    000
                Jump        EndLoop
                Load        Sum
                Add         X
                Store       Sum
                Load        I
                Add         One
                Store       I
                Jump        Loop
    EndLoop,    Halt
    X,          DEC         3
    Y,          DEC         6
    I,          DEC         0
    Sum,        DEC         0
    One,        DEC         1
                END
    ```

### 50. 設某假想系統的控制單元中有一包含若干個 D 正反器的環式(循環)計數器。該系統以 1GHz 的速度執行並且每道指令最高的微運作數是 10。
- 由每個正反器輸出的訊號其最大頻率(每秒的訊號脈衝數)為何?
> $10^{-1}*10^{9}=10^{8}$<br/>
    ```
    10GHz
    ```
- 執行僅需 4 個微運作的指令需時若干?
> $4*10^{-8}\ s = 40ns$<br/>
    ```
    40ns
    ```
### 62. 在下表中指出於執行 JumpI 指令時每一步驟中哪些控制訊號的值應為1?
| Step             | RTN           |  Time   | $P_{5}$ | $P_{4}$ | $P_{3}$ | $P_{2}$ | $P_{1}$ | $P_{0}$ | $C_{r}$ | $IncrPC$ | $M_{R}$ | $M_{w}$ | $L_{ALT}$ |
| ---------------- | ------------- | :-----: | :-----: | :-----: | :-----: | :-----: | :-----: | :-----: | :-----: | :------: | :-----: | :-----: | :-------: |
| Fetch            | MAR<-PC       | $T_{0}$ |    0    |    0    |    1    |    0    |    1    |    0    |    0    |    0     |    0    |    0    |     0     |
|                  | IR<-M[MAR]    | $T_{1}$ |    1    |    1    |    1    |    0    |    0    |    0    |    0    |    0     |    1    |    0    |     0     |
| Decode IR[15-12] | PC<-PC+1      | $T_{2}$ |    0    |    0    |    0    |    0    |    0    |    0    |    0    |    1     |    0    |    0    |     0     |
| Get operand      | MAR<-IR[11-0] | $T_{3}$ |    0    |    0    |    1    |    1    |    1    |    1    |    0    |    0     |    0    |    0    |     0     |
| Excute           | MBR<-M[MAR]   | $T_{4}$ |    0    |    1    |    1    |    0    |    0    |    0    |    0    |    0     |    1    |    0    |     0     |
|                  | PC<-MBR       | $T_{5}$ |    0    |    1    |    0    |    0    |    1    |    1    |    1    |    0     |    0    |    0    |     0     |

### 63. 在下表中指出於執行 StoreI 指令時每一步驟中哪些控制訊號的值應為1?
| Step             | RTN           |  Time   | $P_{5}$ | $P_{4}$ | $P_{3}$ | $P_{2}$ | $P_{1}$ | $P_{0}$ | $C_{r}$ | $IncrPC$ | $M_{R}$ | $M_{w}$ | $L_{ALT}$ |
| ---------------- | ------------- | :-----: | :-----: | :-----: | :-----: | :-----: | :-----: | :-----: | :-----: | :------: | :-----: | :-----: | :-------: |
| Fetch            | MAR<-PC       | $T_{0}$ |    0    |    0    |    1    |    0    |    1    |    0    |    0    |    0     |    0    |    0    |     0     |
|                  | IR<-M[MAR]    | $T_{1}$ |    1    |    1    |    1    |    0    |    0    |    0    |    0    |    0     |    1    |    0    |     0     |
| Decode IR[15-12] | PC<-PC+1      | $T_{2}$ |    0    |    0    |    0    |    0    |    0    |    0    |    0    |    1     |    0    |    0    |     0     |
| Get operand      | MAR<-IR[11-0] | $T_{3}$ |    0    |    0    |    1    |    1    |    1    |    1    |    0    |    0     |    0    |    0    |     0     |
| Excute           | MBR<-M[MAR]   | $T_{4}$ |    0    |    1    |    1    |    0    |    0    |    0    |    0    |    0     |    1    |    0    |     0     |
|                  | MAR<-MBR      | $T_{5}$ |    0    |    1    |    0    |    0    |    1    |    1    |    0    |    0     |    0    |    0    |     0     |
|                  | MBR<-AC       | $T_{6}$ |    0    |    1    |    1    |    1    |    0    |    0    |    1    |    0     |    0    |    0    |     1     |
|                  | M[MAR]<-MBR   | $T_{7}$ |    0    |    1    |    0    |    0    |    1    |    1    |    1    |    0     |    1    |    1    |     0     |