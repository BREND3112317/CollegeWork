/************** DAC2.C *************************
*動作：輸出三角函數資料送到DAC0800輸出正弦波
**********************************************/
#include "..\AT89X52.H"   //暫存器及組態定義
#include <math.h> //將算數函數包括進來
sfr  Data=0x80;//P0資料BUS輸出
float x;     //正弦值計算
int i;   //角度
main()
{
  while(1)  //重覆執行 
   {
     for(i=0;i<360;i++)       //角度0~359度
      {
        x=sin(i*3.14159/180);//角度轉為弧度-1~0~1
        Data=x*127+128; //弧度-1~0~1轉為1~128~255輸出
      }
   }
}